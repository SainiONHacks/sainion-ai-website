<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Verification - SainiON AI</title>
    <link rel="icon" href="icon.ico" type="image/x-icon">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .verify-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 255, 136, 0.2);
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .logo {
            font-size: 48px;
            margin-bottom: 20px;
        }

        h1 {
            color: #00FF88;
            font-size: 32px;
            margin-bottom: 20px;
        }

        .message {
            color: #E0E0E0;
            font-size: 18px;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .loading {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 4px solid rgba(0, 255, 136, 0.3);
            border-top-color: #00FF88;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px 0;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .btn {
            background: #00FF88;
            color: #000;
            border: none;
            padding: 15px 40px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .btn:hover {
            background: #00FFAA;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 255, 136, 0.4);
        }

        .success-icon {
            font-size: 64px;
            color: #00FF88;
            margin: 20px 0;
        }

        .error-icon {
            font-size: 64px;
            color: #ff4444;
            margin: 20px 0;
        }

        .status-box {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .error-box {
            background: rgba(255, 68, 68, 0.1);
            border: 1px solid rgba(255, 68, 68, 0.3);
        }
    </style>
</head>

<body>
    <div class="verify-container">
        <div class="logo">üß†</div>
        <h1>Email Verification</h1>

        <div id="loadingState">
            <div class="loading"></div>
            <p class="message">Verifying your email address...</p>
        </div>

        <div id="successState" style="display: none;">
            <div class="success-icon">‚úÖ</div>
            <div class="status-box">
                <h2 style="color: #00FF88; margin-bottom: 10px;">Verification Successful!</h2>
                <p class="message">Your email has been verified. You can now login to your account.</p>
            </div>
            <a href="dashboard.html" class="btn">üöÄ Go to Login</a>
            <a href="index.html" class="btn">üè† Go to Home</a>
        </div>

        <div id="errorState" style="display: none;">
            <div class="error-icon">‚ùå</div>
            <div class="status-box error-box">
                <h2 style="color: #ff4444; margin-bottom: 10px;">Verification Failed</h2>
                <p class="message" id="errorMessage">Something went wrong.</p>
            </div>
            <button class="btn" onclick="resendEmail()">üìß Resend Verification Email</button>
            <a href="index.html" class="btn">üè† Go to Home</a>
        </div>

        <div id="resendState" style="display: none;">
            <div style="font-size: 48px; margin: 20px 0;">üìß</div>
            <div class="status-box">
                <h2 style="color: #00FF88; margin-bottom: 10px;">Resend Verification</h2>
                <p class="message">Enter your email to receive a new verification link:</p>
                <input type="email" id="resendEmail" placeholder="your@email.com"
                    style="width: 100%; padding: 12px; margin: 15px 0; border-radius: 8px; border: 2px solid #00FF88; background: rgba(255,255,255,0.1); color: #fff; font-size: 14px;">
                <button class="btn" onclick="submitResend()">üì§ Send New Link</button>
            </div>
        </div>
    </div>

    <script>
        // Extract parameters from URL
        const urlParams = new URLSearchParams(window.location.search);
        const email = urlParams.get('email');
        const token = urlParams.get('token');

        // State elements
        const loadingState = document.getElementById('loadingState');
        const successState = document.getElementById('successState');
        const errorState = document.getElementById('errorState');
        const resendState = document.getElementById('resendState');
        const errorMessage = document.getElementById('errorMessage');

        // Verify email immediately on page load
        if (email && token) {
            setTimeout(() => {
                verifyEmail(email, token);
            }, 1500); // Delay for UX
        } else {
            showError("Invalid verification link. Please check your email and try again.");
        }

        async function verifyEmail(email, token) {
            // NOTE: In production, this would call your backend API
            // For now, we'll simulate the verification

            // Simulated API call (replace with actual backend)
            const isValid = true; // This should come from your backend

            if (isValid) {
                showSuccess();
            } else {
                showError("Invalid or expired verification token. Please request a new verification email.");
            }
        }

        function showSuccess() {
            loadingState.style.display = 'none';
            successState.style.display = 'block';
        }

        function showError(message) {
            loadingState.style.display = 'none';
            errorMessage.textContent = message;
            errorState.style.display = 'block';
        }

        function resendEmail() {
            errorState.style.display = 'none';
            resendState.style.display = 'block';

            // Pre-fill email if available
            if (email) {
                document.getElementById('resendEmail').value = email;
            }
        }

        function submitResend() {
            const resendEmailInput = document.getElementById('resendEmail').value.trim();

            if (!resendEmailInput || !resendEmailInput.includes('@')) {
                alert('‚ùå Please enter a valid email address');
                return;
            }

            // NOTE: In production, call your backend to resend verification
            alert('üìß Verification email sent! Please check your inbox.');
            window.location.href = 'dashboard.html';
        }
    </script>
</body>

</html>